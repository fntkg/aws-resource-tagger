# AWS Resource Tagger

This project provides a Python-based solution for tagging various AWS resources using information extracted from CSV files. _The CSV files are generated by **Wiz**_.

## Overview
The program uses the **[Factory Design Pattern](https://refactoring.guru/design-patterns/factory-method)** to dynamically create taggers for different AWS resource types. Each resource type (e.g., Security Group, Subnet, Route Table) has its own tagging logic encapsulated in separate classes, _making the code modular and extensible_.

## Key Features
- Supports tagging of Security Groups, Subnets, and Route Tables.
- Uses CSV files from Wiz as input.
- Dynamically determines the resource type, ID, and region from the CSV file.
- Automatically handles errors during the tagging process without halting execution.

## Modifying Tags
To change the tags applied to resources, edit the `tags` variable defined in the `main.py` file. This variable contains a list of dictionaries specifying the key-value pairs for each tag.

Example:
```python
# Example tags in main.py
 tags = [
     {"Key": "Environment", "Value": "Production"},
     {"Key": "Owner", "Value": "TeamX"}
 ]
```

## Adding a New Resource Tagger
To add support for tagging a new AWS resource type, follow these steps:

1. **Create a New Tagger Class**
   - Create a new Python file (e.g., `new_resource_tagger.py`) in the `taggers` directory.
   - Define a class for the new resource type that inherits from `AwsResourceTagger` (located in `base_tagger.py`).
   - Implement the `add_tags` method with the logic specific to the new resource type.

   Example:
   ```python
   from base_tagger import AwsResourceTagger
   import boto3

   class NewResourceTagger(AwsResourceTagger):
       def add_tags(self):
           print(f"Tagging New Resource: {self.resource_id} in region {self.region}")
           client = boto3.client('service_name', region_name=self.region)
           try:
               client.create_tags(Resources=[self.resource_id], Tags=self.tags)
           except Exception as e:
               print(f"Error tagging New Resource {self.resource_id}: {e}")
   ```

2. **Register the New Tagger in the Factory**
   - Open `tagger_factory.py`.
   - Add a condition to handle the new resource type.

   Example:
   ```python
   from taggers.new_resource_tagger import NewResourceTagger

   class AwsResourceTaggerFactory:
       @staticmethod
       def get_tagger(resource_type, resource_id, tags, region):
           if resource_type == "newResourceType":
               return NewResourceTagger(resource_id, tags, region)
           # Existing resource types...
           else:
               raise ValueError(f"Unsupported resource type: {resource_type}")
   ```

## How It Works
1. The program reads a CSV file provided as a command-line argument.
2. It extracts resource type, resource ID, and region dynamically from the file.
3. Based on the resource type, the factory creates an appropriate tagger instance.
4. The tagger applies tags to the resource in AWS.

## Usage
1. Ensure your Python environment is set up with the required dependencies.
2. Run the script with the path to the CSV file:
   ```bash
   python main.py /path/to/your_file.csv
   ```
3. The program will process the CSV file and tag the resources accordingly.

## Dependencies
- Python 3.7+
- `boto3`

## Contributing
Contributions are welcome! If you find a bug or have suggestions for new features, feel free to open an issue or submit a pull request.

